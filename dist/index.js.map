{"version":3,"file":"index.js","sources":["../src/util.js","../src/index.js"],"sourcesContent":["export function loadScript(d, s, id, jsSrc, cb, onError) {\n  const element = d.getElementsByTagName(s)[0]\n  const fjs = element\n  let js = element\n  js = d.createElement(s)\n  js.id = id\n  js.src = jsSrc\n  if (fjs && fjs.parentNode) {\n    fjs.parentNode.insertBefore(js, fjs)\n  } else {\n    d.head.appendChild(js)\n  }\n  js.onerror = onError\n  js.onload = cb\n}\n\nexport function removeScript(d, id) {\n  const element = d.getElementById(id)\n\n  if (element) {\n    element.parentNode.removeChild(element)\n  }\n}\n","import { useEffect, useState } from 'react'\nimport { loadScript, removeScript } from './util'\n\nexport default function useFacebookLogin({\n  appId,\n  version = 'v10.0',\n  jsSrc = 'https://connect.facebook.net/en_US/sdk.js',\n  onSuccess = () => {},\n  onFailure = () => {}\n}) {\n  const [loaded, setLoaded] = useState(false)\n\n  useEffect(() => {\n    if (!appId) return onFailure({ error: 'Facebook App ID required.' })\n    loadScript(\n      document,\n      'script',\n      'facebook-login',\n      jsSrc,\n      () => {\n        window.fbAsyncInit = function () {\n          window.FB.init({\n            appId,\n            autoLogAppEvents: true,\n            xfbml: true,\n            version\n          })\n        }\n        setLoaded(true)\n      },\n      () => {\n        setLoaded(true)\n        onFailure({ error: 'Facebook API coult not load.' })\n      }\n    )\n\n    return () => {\n      removeScript(document, 'facebook-login')\n    }\n  }, [])\n\n  function signIn() {\n    if (!window.FB) return onFailure({ error: 'Facebook API coult not load.' })\n    window.FB.getLoginStatus(function (response) {\n      statusChangeCallback(response)\n    })\n  }\n  function statusChangeCallback(response) {\n    if (response.authResponse) {\n      onSuccess(response)\n    } else {\n      window.FB.login(function (response) {\n        if (response.authResponse) {\n          onSuccess(response)\n        } else {\n          onFailure({ error: 'User cancelled login or did not fully authorize.' })\n        }\n      })\n    }\n  }\n  function signOut() {\n    return new Promise((resolve) => {\n      window.FB.logout(function (response) {\n        resolve(response)\n      })\n    })\n  }\n\n  return { loaded, signIn, signOut }\n}\n"],"names":["loadScript","d","s","id","jsSrc","cb","onError","element","getElementsByTagName","fjs","js","createElement","src","parentNode","insertBefore","head","appendChild","onerror","onload","removeScript","getElementById","removeChild","useFacebookLogin","appId","version","onSuccess","onFailure","useState","loaded","setLoaded","useEffect","error","document","window","fbAsyncInit","FB","init","autoLogAppEvents","xfbml","signIn","getLoginStatus","response","statusChangeCallback","authResponse","login","signOut","Promise","resolve","logout"],"mappings":"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"}